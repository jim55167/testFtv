var youtubeId="XxJKnDLYZz4",player,is_playing=!0,done=!1;function loadYTapi(){var tag=document.createElement("script");tag.src="https://www.youtube.com/player_api";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag)}function onYouTubePlayerAPIReady(){player=new YT.Player(document.querySelector("#top-live"),{height:"100%",width:"100%",videoId:youtubeId,playerVars:{autoplay:1,controls:1,disablekb:1,enablejsapi:1,modestbranding:1,playsinline:1,rel:0,origin:window.location.origin},events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange}})}function onPlayerReady(event){player.setVolume(0);var playButton=$("#yt-play"),stopButton=$("#yt-stop"),that=this;playButton.on("click",(function(click_event){player.playVideo(),that.is_playing=!1,playButton.fadeOut(),stopButton.fadeIn()})),stopButton.on("click",(function(click_event){player.pauseVideo(),that.is_playing=!0,stopButton.fadeOut(),playButton.fadeIn()}))}function changeBorderColor(playerStatus){var playButton=$("#yt-play"),stopButton=$("#yt-stop"),color;-1==playerStatus||0==playerStatus||(1==playerStatus?(playButton.fadeOut(),stopButton.fadeIn(),$("#ytblock").removeClass("is-hidden")):2==playerStatus?(stopButton.fadeOut(),playButton.fadeIn(),$("#ytblock").addClass("is-hidden")):3==playerStatus&&(color="#AA00FF"))}function onPlayerStateChange(event){event.data!=YT.PlayerState.PLAYING||done||(this.is_playing=!0),changeBorderColor(event.data)}function floatingIframe(){"none"!==$("#top-live").css("display")&&jQuery("#top-live").length>0&&(jQuery("#top-live").wrap("<div id='ytwrap' class='video-container' ><div class='iframe-parent-class'><div id='ytblock' class='is-hidden'></div></div></div>"),$("#ytblock").append("<button id='yt-play'><i class='fas fa-play'></i></button><button id='yt-stop'><i class='fas fa-times'></i></button>"),jQuery("#top-live").each((function(index){var windows=$(window),iframeWrap=$("#top-live").parent().parent(),iframeblock=$("#top-live").parent(),iframe,iframeHeight=$("#top-live").parent().outerHeight(),iframeElement=$("#top-live").get(0);windows.on("scroll",(function(){var windowScrollTop,iframeBottom;windows.scrollTop()>iframeHeight+iframeWrap.offset().top?(iframeWrap.height(iframeHeight),iframeblock.addClass("stuck")):(iframeWrap.height("auto"),iframeblock.removeClass("stuck"))}))})))}function createLivingItem(data){let str="";str+='<li class="col-12 living-item">',str+='  <a href="#" class="video" data-vid="'+data.videoId+'">',str+='    <div class="img-block">',str+='      <img src="'+data.img+'" alt="'+data.title+'" />',str+="    </div>",str+='    <div class="content">',str+='      <div class="title">'+data.title+"</div>",str+="     </div>",str+="  </a>",str+="</li>";let block=$(str),a;return block.find("a").on("click",(function(e){e.preventDefault();let self=$(this);if(!self.hasClass("active")){let li,siblings=self.parent().siblings(),vid=self.data("vid");siblings.each((function(index,elem){$(this).find(".video").removeClass("active")})),self.addClass("active"),youtubeId=vid,player.loadVideoById(youtubeId)}})),block}$((function(){let api_domain="https://ftvnews-api2.azurewebsites.net/";$.ajax({url:api_domain+"API/YTHomeLive.aspx",contentType:"application/json"}).done((function(data,textStatus,jqXHR){if("Success"==data.Status){let arr=data.data,list=$("#living-list");arr.length>0?(arr.forEach((function(item,index,array){let living_item=createLivingItem(item);0===index&&(youtubeId=item.videoId,living_item.find(".video").addClass("active")),living_item.appendTo(list)})),floatingIframe(),loadYTapi()):($("#top-live").hide(),$(".living").hide())}else $("#top-live").hide(),$(".living").hide()})).fail((function(jqXHR,textStatus,errorThrown){$("#top-live").hide(),$(".living").hide()}))}));